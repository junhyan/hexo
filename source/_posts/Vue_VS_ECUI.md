---
title: Vue VS ECUI
date: 2018-06-04 14:41:23
tags:
---
搞了很长时间的公司内部的前端框架ECUI，ECUI是一个相对较老的框架，在公司期间也使用Vue进行过H5得开发，抽出空来研究下Vue的实现原理，并且读两个框架做一些比较，如果可以，结合两个框架的优点，实现一个新的轻量级框架。

## VS
| VUE | ECUI
 - | :-: | :-:
结构 | vue分为分成应用、组件(路由)两层，应用代码根据功能划分的结构，功能通过积木的方式来实现，路由是依托组件本身存在的，文件组件化，布局页面和逻辑都写在vue文件，vue的组件从功能上可以类比为ecui的路由| ecui分为应用、模块、路由和控件四层结构，模块是上线的最小单位，控件是交互控制的最小单位，ecui的路由从功能上可以类比为vue的组件。
交互控制 | 分散事件管理，事件与viewmodel绑定，不同的viewmodel的事件不关联。依赖外部的交互框架进行交互控制，如fastclick等。 | ecui具有核心的事件控制器和状态控制器，统一了交互行为，屏蔽了在不同浏览器或者不同设备(PC&Mobile)间的交互差异，触屏和鼠标事件在ecui中实现了一致化。
编程方式 | 面向数据的编程，数据驱动，vue提供了许多的数据相关的viewmodel属性，比如data，watch，compute等，数据敏感度高。对于纯前端的开发人员好理解 | 面向对象(控件)的编程思想，组件模型参照经典桌面控件(MFC)的结构，对于后端转前端的开发人员好理解
组件扩展 | 功能组件成树形分布，功能组件是由一个或多个基础组件或者低级的功能组件组合而成，组件的实现是一种占位式的实现方式，使用组件需要根据功能提供已经定义好的参数。组件扩展通常通过复制代码或添加参数来进行。 |  框架式的组件实现方式，可以通过组合的方式把需要的组件组合在一起形成一个新的组件，也可以通过继承的方式获得父组件的特性。对于不同种类控件固化的相似操作，ecui提供类似Java 8"接口"的方式处理，对于可选择的相似操作，ecui提供扩展功能(ext-)的方式处理。
路由  |  基于vue-route库，模块化，路由的配置是基于组件来实现的，库中提供路由过渡效果，默认使用hash模式，支持history模式。数据请求可以通过外部库比如axios实现，vue本身没有提供数据请求方式 | ecui是可以通过路由结合子路由的方式指定分级渲染，加载一级渲染一级(也可以不渲染)，从而实现数据的同异步处理。仅支持hash模式来实现路由的跳转
缓存  | vue使用<keep-alive>组件包裹动态组件时，会缓存不活动的组件实例，而不是销毁它们，可以通过include 和 exclude 属性可以有条件的设置缓存的具体组件 | ecui的缓存通过实体的DOM结构进行，可以选择针对单个控件或者整个路由进行缓存(ecui路由的缓存是结合Layer来实现结构的保存，使用dom直接存储，会有额外的内存开销，好处就是再次渲染无成本)
组织隔离 | vue从框架的层面对各个组件做了组织隔离，从框架层面解决了命名冲突的问题。开发者不用太多关心应用组织结构的隔离 | ecui使用按模块的命名规则进行组织隔离，也解决了命名冲突的问题，但需要开发者有良好的开发习惯。
首屏加载  | 关于首屏加载，vue在可以通过向#app的div中注入首屏静态页的方式实现首屏加载不显示空白，在vue中只有在框架加载完毕后才会显示dist中的内容，目前知道的示例中只支持单个路由的首屏显示 | ecui通过layer的方式实现首屏快速加载显示，通过layer的方式实现首屏加载可以不限于一个页面的首屏加载，只要是从原生app直接跳转到h5的页面都可以通过layer来实现首屏的框架显示，同时在ecui中路由切换的动画也可以通过layer来实现。
调试与打包  |  vue使用webpack打包，打包结果是散列化的，所以不需要设置no-cache。vue需要二次编译，不支持直接源代码级别的单步联调。 |  ecui打包使用build shell脚本，打包没有进行散列化，需要设置no-cache，ecui代码可直接在浏览器中运行，而且本身提供了ajax本地模拟，支持完全的本地调试(支持file://协议)
其他 | 1、模板引擎使用vue的模板引擎，类似于angular的模板引擎实现<br>2、mvvm的实现通过es5新特性，对data中的属性使用 Object.defineProperty 把这些属性全部转为 getter/setter，并且vue的数据监听可以监听到任何一级组件的属性。<br>3、vue对node外部库依赖性强，在各个维度支持各种插件。  |  1、默认使用etpl模板引擎<br>2、mvvm通过setData方法和form提交来实现。Ecui的数据监听只能监听顶级的属性<br>3、完全自洽无外部库依赖，各个环节仅有唯一的选择.
